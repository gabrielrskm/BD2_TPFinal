Create Database TPFinal
Collate Latin1_General_CI_AI
Go
Use TPFinal
Go

Create Table Provincia(
    IDProvincia int not null primary key identity(1,1),
    NombreProvincia nvarchar(100) not null
)
Go

Create Table Localidad(
    IDLocalidad int not null primary key identity(1,1),
    IDProvincia int not null foreign key references Provincia(IDProvincia),
    NombreLocalidad nvarchar(100) not null
)
Go

Create Table Cliente(
    Cuil int not null primary key,
    Email nvarchar(100) not null,
    Password nvarchar(100) not null,
    NombreCliente nvarchar(100) not null,
    Apellido nvarchar(100) not null,
    IDLocalidad int not null foreign key references Localidad(IDLocalidad)
)
Go

Create Table Restaurante(
    IDRestaurante int not null primary key identity(1,1),
    Email nvarchar(100) not null,
    Password nvarchar(100) not null,
    NombreRestaurante nvarchar(100) not null,
    Direccion nvarchar(255) not null,
    IDLocalidad int not null foreign key references Localidad(IDLocalidad)
)
Go

Create Table TipoComida(
    IDTipoComida int not null primary key identity(1,1),
    NombreComida nvarchar(100) not null
)
Go

Create Table TipoPlato(
    IDTipoPlato int not null primary key identity(1,1),
    NombrePlato nvarchar(100) not null,
    IDTipoComida int not null foreign key references TipoComida(IDTipoComida),
    Descripcion nvarchar(255)
)
Go

Create Table PlatoRestaurante(
    IDPlatoRestaurante int not null primary key identity(1,1),
    IDRestaurante int not null foreign key references Restaurante(IDRestaurante),
    TituloPlato nvarchar(100) not null,
    PrecioUnitario decimal(10,2) not null,
    IDTipoPlato int not null foreign key references TipoPlato(IDTipoPlato)
)
Go

Create Table Calificaciones(
    IDCalificaciones int not null primary key identity(1,1),
    FechaConsumo date not null,
    FechaCalificacion datetime not null,
    ClienteId int not null foreign key references Cliente(Cuil),
    IDPlatoRestaurante int not null foreign key references PlatoRestaurante(IDPlatoRestaurante),
    Calificacion int not null check( Calificacion between 1 and 5 ),
    Comentarios nvarchar(255)
)
Go